var __awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}s((r=r.apply(e,n||[])).next())}))},__generator=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},$=function(){var e=function(e){for(var n=[27,91],t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n.push(109),Buffer.from(n).toString()};return{BOLD:e("1"),DIM:e("2"),UNDERSCORE:e("4"),BLINK:e("5"),INVERT:e("7"),HIDDEN:e("8"),CLEAR:e("0"),BLACK:e("30"),RED:e("31"),GREEN:e("32"),YELLOW:e("33"),BLUE:e("34"),MAGENTA:e("35"),CYAN:e("36"),WHITE:e("37"),BG_BLACK:e("40"),BG_RED:e("41"),BG_GREEN:e("42"),BG_YELLOW:e("43"),BG_BLUE:e("44"),BG_MAGENTA:e("45"),BG_CYAN:e("46"),BG_WHITE:e("47")}}(),cli=function(){var e=function(){function e(e,n){this.flags=[],this.path=e,this.callback=n}return e.prototype.getFlags=function(){return this.flags},e.prototype.addFlag=function(e,n,t){return void 0===n&&(n="any"),void 0===t&&(t=!1),this.flags.push({name:e,type:n,required:t}),this},e}(),n=[],t=require("readline");var r=!1;return process.addListener("beforeExit",(function(e){var t,a,o;!1===r&&(r=!0,function(e){var t=e.commands.join("."),r=n.find((function(e){return e.path===t}));if(void 0!==r){var a={};e.flags.forEach((function(e){var n,t=r.getFlags().find((function(n){return n.name===e.name||"*"===n.name}));if(void 0!==t){var o=!0;"any"!==t.type&&(0===e.values.length?(o=!1,cli.log($.RED+"Expected value:",$.CLEAR+e.name,"expects a",t.type+"!")):e.values.forEach((function(n){typeof n!==t.type&&(o=!1,cli.log($.RED+"Incorrect type:",$.CLEAR+e.name,"must be a",t.type+"!"))}))),o&&(void 0!==a[e.name]?(n=a[e.name]).push.apply(n,e.values):a[e.name]=e.values)}else cli.log($.RED+"Unexpected flag:",$.CLEAR+e.name)}));var o=!1;r.getFlags().forEach((function(e){e.required&&("*"===e.name?0===Object.keys(a).length&&cli.log($.RED+"At least one flag is required!"):void 0===Object.keys(a).find((function(n){return n===e.name}))&&(o=!0,cli.log($.RED+"Missing required flag:",$.CLEAR+e.name)))})),o||r.callback(a)}else""!==t&&cli.log($.RED+"Unknown command:",$.CLEAR+e.commands.join(" -> "))}((t=process.argv.slice(2),a=[],o=[],t.forEach((function(e){if(e.startsWith("-"))e.startsWith("--")?o.push({name:e.slice(2),values:[]}):e.slice(1).split("").forEach((function(e){o.push({name:e,values:[]})}));else if(o.length>0){var n=void 0;n=e.match(/^[0-9]+$/)?Number(e):"true"===e||"false"===e?Boolean(e):e,o[o.length-1].values.push(n)}else a.push(e)})),{commands:a,flags:o})))})),{log:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];process.stdout.write(e.join(" ")+$.CLEAR+"\n")},addCommand:function(t,r){var a=new e(t,r);return n.push(a),a},question:function(e){return __awaiter(this,void 0,Promise,(function(){var n;return __generator(this,(function(r){return n=t.createInterface({input:process.stdin,output:process.stdout}),[2,new Promise((function(t){n.question(""===e?"":e+" ",(function(e){n.close(),t(e)}))}))]}))}))}}}();;module.exports={$,cli};