/* Using QuiCLI v0.5.0                                                                                                                                                                                                                                                                  */var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},$={BLACK:"[30m",RED:"[31m",GREEN:"[32m",YELLOW:"[33m",BLUE:"[34m",MAGENTA:"[35m",CYAN:"[36m",WHITE:"[37m",BG_BLACK:"[40m",BG_RED:"[41m",BG_GREEN:"[42m",BG_YELLOW:"[43m",BG_BLUE:"[44m",BG_MAGENTA:"[45m",BG_CYAN:"[46m",BG_WHITE:"[47m",BOLD:"[1m",DIM:"[2m",UNDERSCORE:"[4m",BLINK:"[5m",INVERT:"[7m",HIDDEN:"[8m",CLEAR:"[0m"},cli=function(){var e=function(){function e(e,t){this.flags=[],this.path=e,this.callback=t}return e.prototype.getFlags=function(){return this.flags},e.prototype.addFlag=function(e,t,r){return void 0===t&&(t="any"),void 0===r&&(r=!1),this.flags.push({name:e,type:t,required:r}),this},e}(),t=[],r={exit:Buffer.from([3]),enter:Buffer.from([13]),delete:Buffer.from([127]),arrowUp:Buffer.from([27,"[".charCodeAt(0),"A".charCodeAt(0)]),arrowDown:Buffer.from([27,"[".charCodeAt(0),"B".charCodeAt(0)])},n=function(){function e(e){if(this.items=[],this.cursor=0,!Array.isArray(e))throw new Error("Menu constructor expects 'items' to be an array!");if(e.length>0)if("string"==typeof e[0])this.items=e.map((function(e,t){return{text:e,value:t}}));else{var t=e.filter((function(e){return"text"in e&&"value"in e}));if(!(t.length>0))throw new Error("Menu items must either be an array of strings or an array of { text: string, value: any }");this.items=t}}return e.prototype.prompt=function(){return __awaiter(this,void 0,Promise,(function(){var e=this;return __generator(this,(function(t){return this.render(!1),process.stdin.resume(),process.stdin.setRawMode(!0),[2,new Promise((function(t){var n=function(o){var s=Object.keys(r).find((function(e){return 0===o.compare(r[e])}));if(void 0!==s){switch(s){case"arrowUp":e.cursor=Math.max(0,e.cursor-1);break;case"arrowDown":e.cursor=Math.min(e.items.length-1,e.cursor+1);break;case"enter":process.stdin.setRawMode(!1),process.stdin.pause(),process.stdin.removeListener("data",n),t(e.items[e.cursor].value);break;case"exit":process.exit(1)}e.render()}};return process.stdin.on("data",n)}))]}))}))},e.prototype.render=function(e){void 0===e&&(e=!0),e&&(process.stdout.moveCursor(0,-1*this.items.length),process.stdout.clearScreenDown());for(var t=0;t<this.items.length;t++){var r=this.cursor===t;cli.log((r?$.CYAN:$.WHITE)+" ðŸ¡ª",this.items[t].text,$.DIM+$.WHITE+(r?"(selected)":""))}},e}();var o=function(){function e(e,t){void 0===t&&(t=!1),this.input="",this.message=e,this.censored=t}return e.prototype.prompt=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){return this.render(),process.stdin.resume(),process.stdin.setRawMode(!0),[2,new Promise((function(t){var n=function(o){var s=Object.keys(r).find((function(e){return 0===o.compare(r[e])}));if(void 0!==s)switch(s){case"enter":return process.stdin.pause(),process.stdin.setRawMode(!1),process.stdin.removeListener("data",n),process.stdout.write($.CLEAR+"\n"),void t(e.input);case"delete":e.input=e.input.slice(0,-1);break;case"exit":process.stdout.write($.CLEAR+"\n"),process.exit(1)}else 1===o.toString().length&&(e.input+=o.toString());e.render()};return process.stdin.on("data",n)}))]}))}))},e.prototype.render=function(){process.stdout.clearLine(0),process.stdout.cursorTo(0),process.stdout.write($.CLEAR+this.message+" "),this.censored?process.stdout.write(this.input.replace(/./g,"*")):process.stdout.write(this.input)},e}();var s=!1;return process.addListener("beforeExit",(function(e){var r,n,o;!1===s&&(s=!0,function(e){var r=e.commands.join(".");if(""!==r){var n=t.find((function(e){return e.path===r}));if(void 0!==n){var o={};e.flags.forEach((function(e){var t,r=n.getFlags().find((function(t){return t.name===e.name||"*"===t.name}));if(void 0!==r){var s=!0;"any"!==r.type&&(0===e.values.length?(s=!1,cli.log($.RED+"Expected value:",$.CLEAR+e.name,"expects a",r.type+"!")):e.values.forEach((function(t){typeof t!==r.type&&(s=!1,cli.log($.RED+"Incorrect type:",$.CLEAR+e.name,"must be a",r.type+"!"))}))),s&&(void 0!==o[e.name]?(t=o[e.name]).push.apply(t,e.values):o[e.name]=e.values)}else cli.log($.RED+"Unexpected flag:",$.CLEAR+e.name)}));var s=!1;n.getFlags().forEach((function(e){e.required&&("*"===e.name?0===Object.keys(o).length&&cli.log($.RED+"At least one flag is required!"):void 0===Object.keys(o).find((function(t){return t===e.name}))&&(s=!0,cli.log($.RED+"Missing required flag:",$.CLEAR+e.name)))})),s||n.callback(o)}else cli.log($.RED+"Unknown command:",$.CLEAR+e.commands.join(" -> "))}}((r=process.argv.slice(2),n=[],o=[],r.forEach((function(e){if(e.startsWith("-"))e.startsWith("--")?o.push({name:e.slice(2),values:[]}):e.slice(1).split("").forEach((function(e){o.push({name:e,values:[]})}));else if(o.length>0){var t=void 0;t=e.match(/^[0-9]+$/)?Number(e):"true"===e||"false"===e?Boolean(e):e,o[o.length-1].values.push(t)}else n.push(e)})),{commands:n,flags:o})))})),{log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];process.stdout.write(e.join(" ")+$.CLEAR+"\n")},addCommand:function(r,n){var o=new e(r,n);return t.push(o),o},promptMenu:function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,new n(e).prompt()];case 1:return[2,t.sent()]}}))}))},promptInput:function(e,t){return void 0===t&&(t=!1),new o(e,t).prompt()}}}();