/* Using QuiCLI v0.4.0                                                                                                                                                                                                                                                                  */var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},$={BLACK:"[30m",RED:"[31m",GREEN:"[32m",YELLOW:"[33m",BLUE:"[34m",MAGENTA:"[35m",CYAN:"[36m",WHITE:"[37m",BG_BLACK:"[40m",BG_RED:"[41m",BG_GREEN:"[42m",BG_YELLOW:"[43m",BG_BLUE:"[44m",BG_MAGENTA:"[45m",BG_CYAN:"[46m",BG_WHITE:"[47m",BOLD:"[1m",DIM:"[2m",UNDERSCORE:"[4m",BLINK:"[5m",INVERT:"[7m",HIDDEN:"[8m",CLEAR:"[0m"},cli=function(){var e=function(){function e(e,t){this.flags=[],this.path=e,this.callback=t}return e.prototype.getFlags=function(){return this.flags},e.prototype.addFlag=function(e,t,r){return void 0===t&&(t="any"),void 0===r&&(r=!1),this.flags.push({name:e,type:t,required:r}),this},e}(),t=[],r={Exit:Buffer.from([3]),Enter:Buffer.from([13]),ArrowUp:Buffer.from([27,"[".charCodeAt(0),"A".charCodeAt(0)]),ArrowDown:Buffer.from([27,"[".charCodeAt(0),"B".charCodeAt(0)])},n=function(){function e(e){if(this.items=[],this.cursor=0,!Array.isArray(e))throw new Error("Menu constructor expects 'items' to be an array!");if(e.length>0)if("string"==typeof e[0])this.items=e.map((function(e,t){return{text:e,value:t}}));else{var t=e.filter((function(e){return"text"in e&&"value"in e}));if(!(t.length>0))throw new Error("Menu items must either be an array of strings or an array of { text: string, value: any }");this.items=t}}return e.prototype.prompt=function(){return __awaiter(this,void 0,Promise,(function(){var e=this;return __generator(this,(function(t){return this.render(!1),process.stdin.resume(),process.stdin.setRawMode(!0),[2,new Promise((function(t){return process.stdin.on("data",(function(n){var o=Object.keys(r).find((function(e){return 0===n.compare(r[e])}));if(void 0!==o){switch(o){case"ArrowUp":e.cursor=Math.max(0,e.cursor-1);break;case"ArrowDown":e.cursor=Math.min(e.items.length-1,e.cursor+1);break;case"Enter":process.stdin.setRawMode(!1),process.stdin.pause(),process.stdin.removeAllListeners("data"),t(e.items[e.cursor].value);break;case"Exit":process.exit(1)}e.render()}}))}))]}))}))},e.prototype.render=function(e){void 0===e&&(e=!0),e&&(process.stdout.moveCursor(0,-1*this.items.length),process.stdout.clearScreenDown());for(var t=0;t<this.items.length;t++){var r=this.cursor===t;cli.log((r?$.CYAN:$.WHITE)+" ðŸ¡ª",this.items[t].text,$.DIM+$.WHITE+(r?"(selected)":""))}},e}();var o=!1;return process.addListener("beforeExit",(function(e){var r,n,i;!1===o&&(o=!0,function(e){var r=e.commands.join(".");if(""!==r){var n=t.find((function(e){return e.path===r}));if(void 0!==n){var o={};e.flags.forEach((function(e){var t,r=n.getFlags().find((function(t){return t.name===e.name||"*"===t.name}));if(void 0!==r){var i=!0;"any"!==r.type&&(0===e.values.length?(i=!1,cli.log($.RED+"Expected value:",$.CLEAR+e.name,"expects a",r.type+"!")):e.values.forEach((function(t){typeof t!==r.type&&(i=!1,cli.log($.RED+"Incorrect type:",$.CLEAR+e.name,"must be a",r.type+"!"))}))),i&&(void 0!==o[e.name]?(t=o[e.name]).push.apply(t,e.values):o[e.name]=e.values)}else cli.log($.RED+"Unexpected flag:",$.CLEAR+e.name)}));var i=!1;n.getFlags().forEach((function(e){e.required&&("*"===e.name?0===Object.keys(o).length&&cli.log($.RED+"At least one flag is required!"):void 0===Object.keys(o).find((function(t){return t===e.name}))&&(i=!0,cli.log($.RED+"Missing required flag:",$.CLEAR+e.name)))})),i||n.callback(o)}else cli.log($.RED+"Unknown command:",$.CLEAR+e.commands.join(" -> "))}}((r=process.argv.slice(2),n=[],i=[],r.forEach((function(e){if(e.startsWith("-"))e.startsWith("--")?i.push({name:e.slice(2),values:[]}):e.slice(1).split("").forEach((function(e){i.push({name:e,values:[]})}));else if(i.length>0){var t=void 0;t=e.match(/^[0-9]+$/)?Number(e):"true"===e||"false"===e?Boolean(e):e,i[i.length-1].values.push(t)}else n.push(e)})),{commands:n,flags:i})))})),{log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];process.stdout.write(e.join(" ")+$.CLEAR+"\n")},addCommand:function(r,n){var o=new e(r,n);return t.push(o),o},promptMenu:function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,new n(e).prompt()];case 1:return[2,t.sent()]}}))}))}}}();